
<div id="{$_name}" style="display:none" for-xepan-component="xepan/cms/Tool_Columns" class="xepan-tool-options">
  <h3>Columns</h3>
  <div class="xepan-tool-option">
    <div id="{$_name}addcolumn" style="background-color:#f2f2f2;padding:5px;margin-bottom:5px;">Add Column</div>
    <div id="{$_name}existingcolumn" class="tool-option-list-group"></div>
  </div>
  <script>
    //- CUSTOM FUNCTION	
    // add Column Option
    function addColumnToOption(position,droppedcolumn){
    	var col = $('<div class="tool-option-list-item xepan-cms-basic-tool-column" style="padding:5px;margin-bottom:10px;border:1px solid gray;" data-columnsequence="'+position+'">Column '+(position + 1) +'</div>').appendTo($('#{$_name}existingcolumn'));
    	
    	// defining column for lg, md, sm, xm width
    	column_option_container = $('<div class="row xepan-cms-tool-column-width-options">').appendTo(col);
    	
    	//
    	lg_col = $('<div class="col-md-3 col-sm-3" data-columnwidth="lg">').appendTo(column_option_container);
    	md_col = $('<div class="col-md-3 col-sm-3" data-columnwidth="md">').appendTo(column_option_container);
    	sm_col = $('<div class="col-md-3 col-sm-3" data-columnwidth="sm">').appendTo(column_option_container);
    	xs_col = $('<div class="col-md-3 col-sm-3" data-columnwidth="xs">').appendTo(column_option_container);
    	
    	// set label
    	$('<p>LG</p>').appendTo(lg_col);
    	$('<p>MD</p>').appendTo(md_col);
    	$('<p>SM</p>').appendTo(sm_col);
    	$('<p>XM</p>').appendTo(xs_col);
    
    	// set column width
    	lg_column_width_select = $('<select data-columnwidth="lg" data-columnsequence="'+position+'">').appendTo(lg_col);
    	md_column_width_select = $('<select data-columnwidth="md" data-columnsequence="'+position+'">').appendTo(md_col);
    	sm_column_width_select = $('<select data-columnwidth="sm" data-columnsequence="'+position+'">').appendTo(sm_col);
    	xs_column_width_select = $('<select data-columnwidth="xs" data-columnsequence="'+position+'">').appendTo(xs_col);
    
    	for (i = 1; i <= 12; i++) {
    		$('<option data-columnwidth="'+i+'">'+i+'</option>').appendTo(lg_column_width_select);
    		$('<option data-columnwidth="'+i+'">'+i+'</option>').appendTo(md_column_width_select);
    		$('<option data-columnwidth="'+i+'">'+i+'</option>').appendTo(sm_column_width_select);
    		$('<option data-columnwidth="'+i+'">'+i+'</option>').appendTo(xs_column_width_select);
    	}
    
    
    	
    	$('.xepan-cms-tool-column-width-options > div > select').on('change',function(){
    		//find nth child of current selected xepan-component and apply class of selected column_width_select
    		var current_selected_dropdown = $(this).closest('select');
    		current_row_column = $(current_selected_component).find('div:eq('+$(current_selected_dropdown).data('columnsequence')+')');
    		if($(current_row_column).length){
    			var column_type = $(current_selected_dropdown).data('columnwidth'); //-return md,lg, etc
    			// remove old class according to dropdown lg/md with it's value
    			for(i=1; i<=12; i++){
    				$(current_row_column).removeClass('col-'+column_type+'-'+i);
    			}
    			
    			$(current_row_column).addClass('col-'+column_type+'-'+$(this).val());
    			$(current_row_column).attr("data-"+column_type,$(this).val());
    		}
    	});
    
    	//- on hover  highlight the dropped column_width_select
    	$(col).on({
    	    mouseenter: function () {
    			current_row_column = $(current_selected_component).find('div:eq('+$(this).data('columnsequence')+')');
    			$(current_row_column).addClass("current-row-column-selected");
    	    },
    	    mouseleave: function () {
    			current_row_column = $(current_selected_component).find('div:eq('+$(this).data('columnsequence')+')');
    			$(current_row_column).removeClass('current-row-column-selected');
    	    }
    	});
    }
    
    $('#{$_name} [data-attr]').on('change',function(){
    	$(current_selected_component).attr($(this).data('attr'),$(this).val());
    });
    
    $('#{$_name}').on('show',function(event){
    	//- $('#{$_name} [data-attr]').each(function(index,value){
    	//- 	$(this).val($(current_selected_component).attr($(this).data('attr')));
    	//- });
    
    	//- for each child column row add column in existingcolumn
    	var count = 0;
    	//remove all html from option row existingcolumn
    	$('#{$_name}existingcolumn').html("");
    	$(current_selected_component).children("div[data-toolcolumnclass='xepan-tool-column']").each(function(event){
    		addColumnToOption(count,$(this));
    		count = count + 1;
    	});
    	
    });
  </script>
  <style>
    .row.xepan-component .tool-option-list-item,.tool-option-list-item{
    	border:1px dotted gray;
    	padding:30px;
    }
    div[data-toolcolumnclass="xepan-tool-column"]{
    	border:1px dotted gray;
    }
  </style>
</div>